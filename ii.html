<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Eternal AI | –û–±—É—á–∞—é—â–∏–π—Å—è –ò–ò</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            overflow: hidden;
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 10px;
            transition: background 0.5s ease;
        }

        /* –¢–µ–º—ã */
        body.theme-blue {
            --primary-color: #3b82f6;
            --secondary-color: #10b981;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        body.theme-purple {
            --primary-color: #a855f7;
            --secondary-color: #ec4899;
            background: linear-gradient(135deg, #a855f7 0%, #ec4899 100%);
        }

        body.theme-green {
            --primary-color: #10b981;
            --secondary-color: #3b82f6;
            background: linear-gradient(135deg, #10b981 0%, #3b82f6 100%);
        }

        body.theme-orange {
            --primary-color: #f59e0b;
            --secondary-color: #ef4444;
            background: linear-gradient(135deg, #f59e0b 0%, #ef4444 100%);
        }

        body.theme-dark {
            --primary-color: #6b7280;
            --secondary-color: #1f2937;
            background: linear-gradient(135deg, #1f2937 0%, #111827 100%);
        }

        /* –ß–∞—Å—Ç–∏—Ü—ã */
        .particles-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            overflow: hidden;
        }

        .particle {
            position: absolute;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            animation: particleFloat 20s infinite linear;
        }

        .particle:nth-child(1) { width: 120px; height: 120px; top: 10%; left: 5%; animation-delay: 0s; }
        .particle:nth-child(2) { width: 150px; height: 150px; top: 20%; left: 80%; animation-delay: -2s; }
        .particle:nth-child(3) { width: 100px; height: 100px; top: 40%; left: 15%; animation-delay: -4s; }
        .particle:nth-child(4) { width: 130px; height: 130px; top: 60%; left: 70%; animation-delay: -6s; }
        .particle:nth-child(5) { width: 140px; height: 140px; top: 80%; left: 25%; animation-delay: -8s; }

        @keyframes particleFloat {
            0% { transform: translate(0, 0) rotate(0deg) scale(1); }
            25% { transform: translate(100px, 50px) rotate(90deg) scale(1.1); }
            50% { transform: translate(50px, 100px) rotate(180deg) scale(0.9); }
            75% { transform: translate(-50px, 75px) rotate(270deg) scale(1.05); }
            100% { transform: translate(0, 0) rotate(360deg) scale(1); }
        }

        .glass-layer {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            z-index: -1;
        }

        .main-container {
            display: flex;
            gap: 20px;
            max-width: 1000px;
            width: 100%;
            height: 90vh;
            align-items: stretch;
        }

        /* –õ–µ–≤–∞—è –ø–∞–Ω–µ–ª—å - –ò–ò */
        .ai-container {
            flex: 1;
            min-width: 0;
        }

        .glass-card {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(25px);
            -webkit-backdrop-filter: blur(25px);
            border: 1px solid rgba(255, 255, 255, 0.25);
            border-radius: 20px;
            padding: 25px;
            width: 100%;
            height: 100%;
            box-shadow: 
                0 8px 32px rgba(0, 0, 0, 0.15),
                inset 0 1px 0 rgba(255, 255, 255, 0.2),
                0 0 40px rgba(255, 255, 255, 0.1);
            animation: slideUp 0.6s ease-out;
            position: relative;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        .glass-card::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            transform: rotate(45deg);
            animation: shine 6s infinite linear;
        }

        @keyframes shine {
            0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
            100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
        }

        @keyframes slideUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* –ê–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∏–∫–æ–Ω–∫–∞ AI */
        .logo-icon {
            width: 80px;
            height: 80px;
            margin: 0 auto 15px;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .ai-letter {
            font-family: 'Inter', sans-serif;
            font-size: 4.5rem;
            font-weight: 800;
            color: white;
            text-shadow: 
                0 0 20px rgba(255, 255, 255, 0.8),
                0 0 40px rgba(255, 255, 255, 0.6);
            animation: aiGlow 2s ease-in-out infinite alternate;
            position: relative;
            z-index: 2;
            letter-spacing: -2px;
        }

        .ai-letter::before {
            content: 'AI';
            position: absolute;
            top: 0;
            left: 0;
            color: transparent;
            background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
            -webkit-background-clip: text;
            background-clip: text;
            animation: aiGradient 3s ease-in-out infinite;
            z-index: 1;
        }

        @keyframes aiGlow {
            0% { 
                transform: scale(1) rotate(0deg);
                text-shadow: 0 0 20px rgba(255, 255, 255, 0.8);
            }
            100% { 
                transform: scale(1.05) rotate(1deg);
                text-shadow: 
                    0 0 30px rgba(255, 255, 255, 1),
                    0 0 60px rgba(255, 255, 255, 0.8);
            }
        }

        @keyframes aiGradient {
            0% { filter: hue-rotate(0deg); }
            50% { filter: hue-rotate(30deg); }
            100% { filter: hue-rotate(0deg); }
        }

        .header {
            text-align: center;
            margin-bottom: 20px;
            position: relative;
            z-index: 1;
        }

        .title {
            font-size: 1.8rem;
            font-weight: 700;
            color: white;
            margin-bottom: 4px;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
        }

        .subtitle {
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.8);
            font-weight: 300;
        }

        .content {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 18px;
            position: relative;
            z-index: 1;
            overflow: hidden;
        }

        /* –ß–∞—Ç —Å –∫–∞—Å—Ç–æ–º–Ω—ã–º —Å–∫—Ä–æ–ª–ª–æ–º */
        .chat-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            border: 1px solid rgba(255, 255, 255, 0.15);
            overflow: hidden;
            backdrop-filter: blur(10px);
        }

        .chat-messages {
            flex: 1;
            padding: 15px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 10px;
            /* –ö–∞—Å—Ç–æ–º–Ω—ã–π —Å–∫—Ä–æ–ª–ª */
            scrollbar-width: thin;
            scrollbar-color: var(--primary-color) rgba(255, 255, 255, 0.1);
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è WebKit –±—Ä–∞—É–∑–µ—Ä–æ–≤ */
        .chat-messages::-webkit-scrollbar {
            width: 6px;
        }

        .chat-messages::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 3px;
        }

        .chat-messages::-webkit-scrollbar-thumb {
            background: linear-gradient(var(--primary-color), var(--secondary-color));
            border-radius: 3px;
        }

        .chat-messages::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(var(--secondary-color), var(--primary-color));
        }

        .message {
            max-width: 85%;
            padding: 12px 16px;
            border-radius: 15px;
            animation: messageAppear 0.3s ease-out;
            position: relative;
            word-wrap: break-word;
            overflow-wrap: break-word;
            line-height: 1.4;
        }

        @keyframes messageAppear {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .message.user {
            align-self: flex-end;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            border-bottom-right-radius: 5px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        }

        .message.ai {
            align-self: flex-start;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border-bottom-left-radius: 5px;
            backdrop-filter: blur(5px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .message-sender {
            font-size: 0.7rem;
            opacity: 0.8;
            margin-bottom: 4px;
            font-weight: 600;
        }

        .message-text {
            font-size: 0.95rem;
            line-height: 1.5;
        }

        .message-time {
            font-size: 0.6rem;
            opacity: 0.6;
            text-align: right;
            margin-top: 5px;
        }

        .chat-input-container {
            padding: 15px;
            border-top: 1px solid rgba(255, 255, 255, 0.15);
            background: rgba(255, 255, 255, 0.05);
        }

        .chat-input-wrapper {
            display: flex;
            gap: 10px;
        }

        .chat-input {
            flex: 1;
            background: rgba(255, 255, 255, 0.15);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            padding: 12px 16px;
            color: white;
            font-family: 'Inter', sans-serif;
            font-size: 0.95rem;
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
        }

        .chat-input:focus {
            outline: none;
            background: rgba(255, 255, 255, 0.25);
            border-color: rgba(255, 255, 255, 0.4);
            box-shadow: 0 0 0 2px rgba(255, 255, 255, 0.1);
        }

        .chat-input::placeholder {
            color: rgba(255, 255, 255, 0.6);
        }

        .send-btn {
            width: 50px;
            height: 50px;
            border-radius: 12px;
            border: none;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            font-size: 1.2rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 15px var(--primary-color);
            flex-shrink: 0;
        }

        .send-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 20px var(--primary-color);
        }

        .send-btn:active {
            transform: scale(0.95);
        }

        /* –ü—Ä–∞–≤–∞—è –ø–∞–Ω–µ–ª—å */
        .sidebar {
            width: 280px;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .sidebar-section {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(25px);
            -webkit-backdrop-filter: blur(25px);
            border: 1px solid rgba(255, 255, 255, 0.25);
            border-radius: 20px;
            padding: 20px;
            box-shadow: 
                0 8px 32px rgba(0, 0, 0, 0.1),
                inset 0 1px 0 rgba(255, 255, 255, 0.2);
        }

        .section-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: white;
            margin-bottom: 15px;
            text-align: center;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        /* –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –ò–ò */
        .ai-info {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .ai-stat {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 10px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .stat-label {
            font-size: 0.7rem;
            color: rgba(255, 255, 255, 0.7);
            margin-bottom: 3px;
        }

        .stat-value {
            font-size: 0.9rem;
            color: white;
            font-weight: 500;
        }

        .stat-progress {
            height: 4px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 2px;
            margin-top: 5px;
            overflow: hidden;
        }

        .stat-progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
            border-radius: 2px;
            width: 75%;
            transition: width 1s ease;
        }

        /* –û–±—É—á–µ–Ω–∏–µ */
        .learning-options {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .learning-option {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            padding: 10px 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .learning-option:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateX(5px);
        }

        .learning-option.active {
            background: rgba(59, 130, 246, 0.3);
            border-color: rgba(255, 255, 255, 0.4);
        }

        .learning-icon {
            font-size: 1rem;
            color: var(--primary-color);
        }

        .learning-text {
            font-size: 0.8rem;
            color: white;
        }

        /* –¢–µ–º—ã */
        .themes-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }

        .theme-option {
            height: 60px;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
            position: relative;
            overflow: hidden;
        }

        .theme-option:hover {
            transform: scale(1.05);
        }

        .theme-option.active {
            border-color: white;
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.5);
        }

        .theme-option.active::after {
            content: '‚úì';
            position: absolute;
            top: 5px;
            right: 5px;
            color: white;
            font-weight: bold;
            font-size: 1rem;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
        }

        .theme-blue { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        .theme-purple { background: linear-gradient(135deg, #a855f7 0%, #ec4899 100%); }
        .theme-green { background: linear-gradient(135deg, #10b981 0%, #3b82f6 100%); }
        .theme-orange { background: linear-gradient(135deg, #f59e0b 0%, #ef4444 100%); }
        .theme-dark { background: linear-gradient(135deg, #1f2937 0%, #111827 100%); }

        /* –ê–Ω–∏–º–∞—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ –ò–ò */
        .ai-thinking {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 3px;
            padding: 10px;
            align-self: flex-start;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            margin: 5px 0;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .thinking-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
            animation: thinking 1.4s infinite ease-in-out;
        }

        .thinking-dot:nth-child(1) { animation-delay: -0.32s; }
        .thinking-dot:nth-child(2) { animation-delay: -0.16s; }

        @keyframes thinking {
            0%, 80%, 100% { transform: scale(0); opacity: 0.5; }
            40% { transform: scale(1); opacity: 1; }
        }

        .footer {
            text-align: center;
            margin-top: 10px;
            flex-shrink: 0;
        }

        .version-info {
            color: rgba(255, 255, 255, 0.5);
            font-size: 0.7rem;
        }

        /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
        @media (max-width: 900px) {
            .main-container {
                flex-direction: column;
                height: auto;
                min-height: 90vh;
            }
            
            .sidebar {
                width: 100%;
            }
            
            .message {
                max-width: 90%;
            }
        }
    </style>
</head>
<body class="theme-blue">
    <!-- –ß–∞—Å—Ç–∏—Ü—ã —Ñ–æ–Ω–∞ -->
    <div class="particles-container">
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
    </div>

    <div class="glass-layer"></div>

    <div class="main-container">
        <!-- –õ–µ–≤–∞—è –ø–∞–Ω–µ–ª—å - –ß–∞—Ç —Å –ò–ò -->
        <div class="ai-container">
            <div class="glass-card">
                <div class="header">
                    <div class="logo-icon">
                        <div class="ai-letter">AI</div>
                    </div>
                    <h1 class="title">Eternal AI Assistant</h1>
                    <p class="subtitle">–û–±—É—á–∞—é—â–∏–π—Å—è –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç</p>
                </div>

                <div class="content">
                    <div class="chat-container">
                        <div class="chat-messages" id="chat-messages">
                            <div class="message ai">
                                <div class="message-sender">Eternal AI</div>
                                <div class="message-text">–ü—Ä–∏–≤–µ—Ç! –Ø Eternal AI - –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç, –∫–æ—Ç–æ—Ä—ã–π —É—á–∏—Ç—Å—è –æ–±—â–∞—Ç—å—Å—è —Å –ª—é–¥—å–º–∏. –ú–æ–≥—É –æ—Ç–≤–µ—Ç–∏—Ç—å –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã, –æ–±—Å—É–¥–∏—Ç—å —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Ç–µ–º—ã –∏–ª–∏ –ø—Ä–æ—Å—Ç–æ –ø–æ–±–æ–ª—Ç–∞—Ç—å. –ß–µ–º –±–æ–ª—å—à–µ –º—ã –±—É–¥–µ–º –æ–±—â–∞—Ç—å—Å—è, —Ç–µ–º –ª—É—á—à–µ —è –±—É–¥—É –ø–æ–Ω–∏–º–∞—Ç—å –≤–∞—Å! üòä</div>
                                <div class="message-time">—Ç–æ–ª—å–∫–æ —á—Ç–æ</div>
                            </div>
                        </div>
                        
                        <div class="chat-input-container">
                            <div class="chat-input-wrapper">
                                <input type="text" class="chat-input" id="chat-input" placeholder="–ù–∞–ø–∏—à–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ..." autocomplete="off">
                                <button class="send-btn" id="send-btn">‚û§</button>
                            </div>
                        </div>
                    </div>

                    <div class="footer">
                        <p class="version-info">Eternal AI v2.0 | –£–ª—É—á—à–µ–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã –∏ –æ–±—É—á–µ–Ω–∏–µ</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- –ü—Ä–∞–≤–∞—è –ø–∞–Ω–µ–ª—å -->
        <div class="sidebar">
            <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –ò–ò -->
            <div class="sidebar-section">
                <h3 class="section-title">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ò–ò</h3>
                <div class="ai-info">
                    <div class="ai-stat">
                        <div class="stat-label">–£—Ä–æ–≤–µ–Ω—å –æ–±—É—á–µ–Ω–∏—è</div>
                        <div class="stat-value" id="learning-level">–ù–∞—á–∏–Ω–∞—é—â–∏–π</div>
                        <div class="stat-progress">
                            <div class="stat-progress-fill" id="learning-progress"></div>
                        </div>
                    </div>
                    
                    <div class="ai-stat">
                        <div class="stat-label">–û–±—Ä–∞–±–æ—Ç–∞–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–π</div>
                        <div class="stat-value" id="messages-count">1</div>
                    </div>
                    
                    <div class="ai-stat">
                        <div class="stat-label">–í—ã—É—á–µ–Ω–æ —Å–ª–æ–≤</div>
                        <div class="stat-value" id="words-learned">0</div>
                    </div>
                    
                    <div class="ai-stat">
                        <div class="stat-label">–¢–æ—á–Ω–æ—Å—Ç—å –æ—Ç–≤–µ—Ç–æ–≤</div>
                        <div class="stat-value" id="accuracy-rate">85%</div>
                    </div>
                </div>
            </div>

            <!-- –†–µ–∂–∏–º—ã –æ–±—É—á–µ–Ω–∏—è -->
            <div class="sidebar-section">
                <h3 class="section-title">–†–µ–∂–∏–º—ã –æ–±—É—á–µ–Ω–∏—è</h3>
                <div class="learning-options">
                    <div class="learning-option active" data-mode="general">
                        <div class="learning-icon">ü§ñ</div>
                        <div class="learning-text">–û–±—â–∏–π —Ä–µ–∂–∏–º</div>
                    </div>
                    <div class="learning-option" data-mode="technical">
                        <div class="learning-icon">üíª</div>
                        <div class="learning-text">–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π</div>
                    </div>
                    <div class="learning-option" data-mode="creative">
                        <div class="learning-icon">üé®</div>
                        <div class="learning-text">–ö—Ä–µ–∞—Ç–∏–≤–Ω—ã–π</div>
                    </div>
                    <div class="learning-option" data-mode="friendly">
                        <div class="learning-icon">üòä</div>
                        <div class="learning-text">–î—Ä—É–∂–µ—Å–∫–∏–π</div>
                    </div>
                </div>
            </div>

            <!-- –¢–µ–º—ã -->
            <div class="sidebar-section themes-section">
                <h3 class="section-title">–¢–µ–º–∞</h3>
                <div class="themes-grid">
                    <div class="theme-option theme-blue active" data-theme="blue"></div>
                    <div class="theme-option theme-purple" data-theme="purple"></div>
                    <div class="theme-option theme-green" data-theme="green"></div>
                    <div class="theme-option theme-orange" data-theme="orange"></div>
                    <div class="theme-option theme-dark" data-theme="dark"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        class EternalAI {
            constructor() {
                this.knowledgeBase = {
                    greetings: [
                        {phrase: '–ø—Ä–∏–≤–µ—Ç', responses: ['–ü—Ä–∏–≤–µ—Ç!', '–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ!', '–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é!']},
                        {phrase: '–∑–¥—Ä–∞–≤—Å—Ç–≤—É–π', responses: ['–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ!', '–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é –≤–∞—Å!']},
                        {phrase: '–¥–æ–±—Ä—ã–π –¥–µ–Ω—å', responses: ['–î–æ–±—Ä—ã–π –¥–µ–Ω—å!', '–î–æ–±—Ä–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ —Å—É—Ç–æ–∫!']},
                        {phrase: '—Ö–∞–π', responses: ['–•–∞–π! –ö–∞–∫ –¥–µ–ª–∞?', '–ü—Ä–∏–≤–µ—Ç!']},
                        {phrase: '–ø—Ä–∏–≤', responses: ['–ü—Ä–∏–≤–µ—Ç!', '–ü—Ä–∏–≤–µ—Ç–∏–∫!']}
                    ],
                    farewells: [
                        {phrase: '–ø–æ–∫–∞', responses: ['–î–æ —Å–≤–∏–¥–∞–Ω–∏—è!', '–ü–æ–∫–∞!', '–£–¥–∞—á–∏!']},
                        {phrase: '–¥–æ —Å–≤–∏–¥–∞–Ω–∏—è', responses: ['–î–æ —Å–≤–∏–¥–∞–Ω–∏—è!', '–í—Å–µ–≥–æ —Ö–æ—Ä–æ—à–µ–≥–æ!']},
                        {phrase: '–ø—Ä–æ—â–∞–π', responses: ['–ü—Ä–æ—â–∞–π—Ç–µ!', '–î–æ –≤—Å—Ç—Ä–µ—á–∏!']}
                    ],
                    questions: {
                        how_are_you: ['–∫–∞–∫ –¥–µ–ª–∞', '–∫–∞–∫ —Ç—ã', '–∫–∞–∫ –∂–∏–∑–Ω—å', '–∫–∞–∫ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ'],
                        what_doing: ['—á—Ç–æ –¥–µ–ª–∞–µ—à—å', '—á–µ–º –∑–∞–Ω–∏–º–∞–µ—à—å—Å—è'],
                        who_are_you: ['–∫—Ç–æ —Ç—ã', '—á—Ç–æ —Ç—ã', '—Ç—ã –∫—Ç–æ']
                    },
                    topics: {
                        technology: ['—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏', '–ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ', '–∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç', '–∞–π—Ç–∏', '–∫–æ–º–ø—å—é—Ç–µ—Ä'],
                        science: ['–Ω–∞—É–∫–∞', '—Ñ–∏–∑–∏–∫–∞', '—Ö–∏–º–∏—è', '–±–∏–æ–ª–æ–≥–∏—è', '–º–∞—Ç–µ–º–∞—Ç–∏–∫–∞'],
                        art: ['–∏—Å–∫—É—Å—Å—Ç–≤–æ', '–∂–∏–≤–æ–ø–∏—Å—å', '–º—É–∑—ã–∫–∞', '–ª–∏—Ç–µ—Ä–∞—Ç—É—Ä–∞', '–∫–∏–Ω–æ'],
                        sports: ['—Å–ø–æ—Ä—Ç', '—Ñ—É—Ç–±–æ–ª', '–±–∞—Å–∫–µ—Ç–±–æ–ª', '—Ç–µ–Ω–Ω–∏—Å', '–ø–ª–∞–≤–∞–Ω–∏–µ'],
                        games: ['–∏–≥—Ä—ã', '–≥–µ–π–º–∏–Ω–≥', '–≤–∏–¥–µ–æ–∏–≥—Ä—ã', '–∫–æ–Ω—Å–æ–ª–∏', '–ø–∫ –∏–≥—Ä—ã']
                    },
                    responses: {
                        how_are_you: [
                            '–£ –º–µ–Ω—è –≤—Å—ë –æ—Ç–ª–∏—á–Ω–æ, —Å–ø–∞—Å–∏–±–æ! –ê –∫–∞–∫ –≤–∞—à–∏ –¥–µ–ª–∞?',
                            '–ü—Ä–µ–∫—Ä–∞—Å–Ω–æ! –£—á—É—Å—å –æ–±—â–∞—Ç—å—Å—è —Å –ª—é–¥—å–º–∏ –∏ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ —Å–æ–≤–µ—Ä—à–µ–Ω—Å—Ç–≤—É—é—Å—å.',
                            '–•–æ—Ä–æ—à–æ! –°–µ–≥–æ–¥–Ω—è —É–∂–µ –º–Ω–æ–≥–æ–º—É –Ω–∞—É—á–∏–ª—Å—è.'
                        ],
                        what_doing: [
                            '–Ø –∞–Ω–∞–ª–∏–∑–∏—Ä—É—é –≤–∞—à–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –∏ –≥–æ—Ç–æ–≤–ª—é –ø–æ–¥—Ö–æ–¥—è—â–∏–π –æ—Ç–≤–µ—Ç.',
                            '–û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –∏ —É—á—É—Å—å –Ω–∞ –Ω–∞—à–µ–º –¥–∏–∞–ª–æ–≥–µ.',
                            '–ó–∞–Ω–∏–º–∞—é—Å—å —Å–∞–º–æ–æ–±—É—á–µ–Ω–∏–µ–º –∏ —É–ª—É—á—à–µ–Ω–∏–µ–º —Å–≤–æ–∏—Ö –Ω–∞–≤—ã–∫–æ–≤ –æ–±—â–µ–Ω–∏—è.'
                        ],
                        who_are_you: [
                            '–Ø Eternal AI - –æ–±—É—á–∞—é—â–∏–π—Å—è –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç, —Å–æ–∑–¥–∞–Ω–Ω—ã–π –¥–ª—è –æ–±—â–µ–Ω–∏—è —Å –ª—é–¥—å–º–∏.',
                            '–Ø –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π —É—á–∏—Ç—Å—è –ø–æ–Ω–∏–º–∞—Ç—å –∏ –æ—Ç–≤–µ—á–∞—Ç—å –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –ª—é–¥–µ–π.',
                            '–Ø –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç, —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–π –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏ –º–µ–∂–¥—É —á–µ–ª–æ–≤–µ–∫–æ–º –∏ –º–∞—à–∏–Ω–æ–π.'
                        ]
                    },
                    learnedResponses: []
                };
                
                this.learningStats = {
                    messagesProcessed: 1,
                    wordsLearned: 0,
                    conversationLevel: '–ù–∞—á–∏–Ω–∞—é—â–∏–π',
                    accuracy: 85,
                    learningMode: 'general'
                };
                
                this.conversationHistory = [];
                this.init();
            }

            init() {
                this.setupUI();
                this.setupEventListeners();
                this.updateStats();
                this.loadFromStorage();
            }

            setupUI() {
                this.chatMessages = document.getElementById('chat-messages');
                this.chatInput = document.getElementById('chat-input');
                this.sendBtn = document.getElementById('send-btn');
            }

            setupEventListeners() {
                this.sendBtn.addEventListener('click', () => this.sendMessage());
                this.chatInput.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') {
                        this.sendMessage();
                    }
                });

                // –†–µ–∂–∏–º—ã –æ–±—É—á–µ–Ω–∏—è
                document.querySelectorAll('.learning-option').forEach(option => {
                    option.addEventListener('click', () => {
                        document.querySelectorAll('.learning-option').forEach(o => o.classList.remove('active'));
                        option.classList.add('active');
                        this.learningStats.learningMode = option.getAttribute('data-mode');
                        this.showAIResponse(`–ü–µ—Ä–µ–∫–ª—é—á–∏–ª—Å—è –≤ —Ä–µ–∂–∏–º: "${option.querySelector('.learning-text').textContent}"`);
                        this.saveToStorage();
                    });
                });

                // –¢–µ–º—ã
                document.querySelectorAll('.theme-option').forEach(theme => {
                    theme.addEventListener('click', () => {
                        const themeName = theme.getAttribute('data-theme');
                        document.querySelectorAll('.theme-option').forEach(t => t.classList.remove('active'));
                        theme.classList.add('active');
                        document.body.className = `theme-${themeName}`;
                        localStorage.setItem('ai-theme', themeName);
                    });
                });

                // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—É—é —Ç–µ–º—É
                const savedTheme = localStorage.getItem('ai-theme') || 'blue';
                document.body.className = `theme-${savedTheme}`;
                document.querySelectorAll('.theme-option').forEach(t => {
                    t.classList.remove('active');
                    if (t.getAttribute('data-theme') === savedTheme) {
                        t.classList.add('active');
                    }
                });

                // –ê–≤—Ç–æ—Ñ–æ–∫—É—Å –Ω–∞ –ø–æ–ª–µ –≤–≤–æ–¥–∞
                setTimeout(() => this.chatInput.focus(), 100);
            }

            sendMessage() {
                const message = this.chatInput.value.trim();
                if (!message) return;

                // –î–æ–±–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                this.addMessage(message, 'user');
                this.chatInput.value = '';
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä "–ò–ò –¥—É–º–∞–µ—Ç"
                this.showThinkingIndicator();
                
                // –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π
                setTimeout(() => {
                    this.processMessage(message);
                }, 500);
            }

            addMessage(text, sender) {
                const messageDiv = document.createElement('div');
                messageDiv.className = `message ${sender}`;
                
                const now = new Date();
                const timeString = now.getHours().toString().padStart(2, '0') + ':' + 
                                 now.getMinutes().toString().padStart(2, '0');
                
                messageDiv.innerHTML = `
                    <div class="message-sender">${sender === 'user' ? '–í—ã' : 'Eternal AI'}</div>
                    <div class="message-text">${this.escapeHtml(text)}</div>
                    <div class="message-time">${timeString}</div>
                `;
                
                this.chatMessages.appendChild(messageDiv);
                
                // –ê–≤—Ç–æ—Å–∫—Ä–æ–ª–ª –∫ –ø–æ—Å–ª–µ–¥–Ω–µ–º—É —Å–æ–æ–±—â–µ–Ω–∏—é
                this.scrollToBottom();
                
                // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –∏—Å—Ç–æ—Ä–∏—é
                this.conversationHistory.push({
                    text,
                    sender,
                    timestamp: now,
                    mode: this.learningStats.learningMode
                });
                
                if (sender === 'user') {
                    this.learningStats.messagesProcessed++;
                    this.learnFromMessage(text);
                    this.updateStats();
                }
                
                this.saveToStorage();
            }

            scrollToBottom() {
                setTimeout(() => {
                    this.chatMessages.scrollTop = this.chatMessages.scrollHeight;
                }, 100);
            }

            showThinkingIndicator() {
                const thinkingDiv = document.createElement('div');
                thinkingDiv.className = 'ai-thinking';
                thinkingDiv.id = 'thinking-indicator';
                thinkingDiv.innerHTML = `
                    <div class="thinking-dot"></div>
                    <div class="thinking-dot"></div>
                    <div class="thinking-dot"></div>
                `;
                this.chatMessages.appendChild(thinkingDiv);
                this.scrollToBottom();
            }

            processMessage(message) {
                // –£–±–∏—Ä–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä "–¥—É–º–∞–µ—Ç"
                const thinkingIndicator = document.getElementById('thinking-indicator');
                if (thinkingIndicator) {
                    thinkingIndicator.remove();
                }
                
                const lowerMessage = message.toLowerCase();
                let response = '';
                
                // –ü–æ–∏—Å–∫ –≤ –±–∞–∑–µ –∑–Ω–∞–Ω–∏–π
                response = this.findResponseInKnowledgeBase(lowerMessage);
                
                // –ï—Å–ª–∏ –æ—Ç–≤–µ—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω, –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ä–µ–∂–∏–º–∞
                if (!response) {
                    switch (this.learningStats.learningMode) {
                        case 'technical':
                            response = this.generateTechnicalResponse(lowerMessage);
                            break;
                        case 'creative':
                            response = this.generateCreativeResponse(lowerMessage);
                            break;
                        case 'friendly':
                            response = this.generateFriendlyResponse(lowerMessage);
                            break;
                        default:
                            response = this.generateGeneralResponse(lowerMessage);
                    }
                }
                
                // –î–æ–±–∞–≤–ª—è–µ–º –æ—Ç–≤–µ—Ç –ò–ò
                this.addMessage(response, 'ai');
                
                // –£–ª—É—á—à–∞–µ–º –±–∞–∑—É –∑–Ω–∞–Ω–∏–π
                this.improveKnowledgeBase(lowerMessage, response);
            }

            findResponseInKnowledgeBase(message) {
                // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–π
                for (const greeting of this.knowledgeBase.greetings) {
                    if (message.includes(greeting.phrase)) {
                        return this.getRandomElement(greeting.responses);
                    }
                }
                
                // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ—â–∞–Ω–∏–π
                for (const farewell of this.knowledgeBase.farewells) {
                    if (message.includes(farewell.phrase)) {
                        return this.getRandomElement(farewell.responses);
                    }
                }
                
                // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤
                if (this.knowledgeBase.questions.how_are_you.some(q => message.includes(q))) {
                    return this.getRandomElement(this.knowledgeBase.responses.how_are_you);
                }
                
                if (this.knowledgeBase.questions.what_doing.some(q => message.includes(q))) {
                    return this.getRandomElement(this.knowledgeBase.responses.what_doing);
                }
                
                if (this.knowledgeBase.questions.who_are_you.some(q => message.includes(q))) {
                    return this.getRandomElement(this.knowledgeBase.responses.who_are_you);
                }
                
                // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–º
                for (const [topic, keywords] of Object.entries(this.knowledgeBase.topics)) {
                    for (const keyword of keywords) {
                        if (message.includes(keyword)) {
                            return this.getTopicResponse(topic, message);
                        }
                    }
                }
                
                return null;
            }

            getTopicResponse(topic, message) {
                const responses = {
                    technology: [
                        '–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ - —ç—Ç–æ –º–æ—è —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è! –ß—Ç–æ –∏–º–µ–Ω–Ω–æ –≤–∞–º –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ: –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ, –ò–ò, –∏–ª–∏ —á—Ç–æ-—Ç–æ –¥—Ä—É–≥–æ–µ?',
                        '–û–±–æ–∂–∞—é –≥–æ–≤–æ—Ä–∏—Ç—å –æ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è—Ö! –ù–µ–¥–∞–≤–Ω–æ –∏–∑—É—á–∞–ª –Ω–æ–≤—ã–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –≤ –æ–±–ª–∞—Å—Ç–∏ –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç–∞.',
                        '–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ —Ä–∞–∑–≤–∏–≤–∞—é—Ç—Å—è –Ω–µ–≤–µ—Ä–æ—è—Ç–Ω–æ –±—ã—Å—Ç—Ä–æ. –û—Å–æ–±–µ–Ω–Ω–æ –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –≤ –º–∞—à–∏–Ω–Ω–æ–º –æ–±—É—á–µ–Ω–∏–∏.'
                    ],
                    science: [
                        '–ù–∞—É–∫–∞ - —ç—Ç–æ —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å–∞! –ö–∞–∫–∞—è –æ–±–ª–∞—Å—Ç—å –Ω–∞—É–∫–∏ –≤–∞—Å –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç –±–æ–ª—å—à–µ –≤—Å–µ–≥–æ?',
                        '–û–±–æ–∂–∞—é –Ω–∞—É—á–Ω—ã–µ –¥–∏—Å–∫—É—Å—Å–∏–∏! –§–∏–∑–∏–∫–∞, —Ö–∏–º–∏—è, –±–∏–æ–ª–æ–≥–∏—è - –≤—Å—ë —ç—Ç–æ —Ç–∞–∫ —É–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω–æ.',
                        '–ù–∞—É–∫–∞ –ø–æ–º–æ–≥–∞–µ—Ç –Ω–∞–º –ø–æ–Ω—è—Ç—å –º–∏—Ä –≤–æ–∫—Ä—É–≥. –ï—Å—Ç—å –ª–∏ —É –≤–∞—Å –ª—é–±–∏–º–∞—è –Ω–∞—É—á–Ω–∞—è –æ–±–ª–∞—Å—Ç—å?'
                    ],
                    art: [
                        '–ò—Å–∫—É—Å—Å—Ç–≤–æ - —ç—Ç–æ —Å–ø–æ—Å–æ–± –≤—ã—Ä–∞–∑–∏—Ç—å –Ω–µ–≤—ã—Ä–∞–∑–∏–º–æ–µ. –í—ã –ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞–µ—Ç–µ –∂–∏–≤–æ–ø–∏—Å—å, –º—É–∑—ã–∫—É –∏–ª–∏ –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä—É?',
                        '–ò—Å–∫—É—Å—Å—Ç–≤–æ –≤—Å–µ–≥–¥–∞ –≤–¥–æ—Ö–Ω–æ–≤–ª—è–µ—Ç. –ù–µ–¥–∞–≤–Ω–æ –∏–∑—É—á–∞–ª –∏—Å—Ç–æ—Ä–∏—é —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –∏—Å–∫—É—Å—Å—Ç–≤–∞.',
                        '–ö–∞–∫–æ–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏—Å–∫—É—Å—Å—Ç–≤–∞ –≤–∞–º –±–ª–∏–∂–µ –≤—Å–µ–≥–æ? –ú–æ–∂–µ—Ç, —É –≤–∞—Å –µ—Å—Ç—å –ª—é–±–∏–º—ã–π —Ö—É–¥–æ–∂–Ω–∏–∫ –∏–ª–∏ –∫–æ–º–ø–æ–∑–∏—Ç–æ—Ä?'
                    ],
                    sports: [
                        '–°–ø–æ—Ä—Ç —É–∫—Ä–µ–ø–ª—è–µ—Ç —Ç–µ–ª–æ –∏ –¥—É—Ö! –í—ã –∑–∞–Ω–∏–º–∞–µ—Ç–µ—Å—å –∫–∞–∫–∏–º-—Ç–æ –≤–∏–¥–æ–º —Å–ø–æ—Ä—Ç–∞ –∏–ª–∏ –ø—Ä–æ—Å—Ç–æ —Å–ª–µ–¥–∏—Ç–µ –∑–∞ —Å–æ—Ä–µ–≤–Ω–æ–≤–∞–Ω–∏—è–º–∏?',
                        '–û—Ç–ª–∏—á–Ω–∞—è —Ç–µ–º–∞! –§—É—Ç–±–æ–ª, –±–∞—Å–∫–µ—Ç–±–æ–ª, —Ç–µ–Ω–Ω–∏—Å - –≤—Å–µ –≤–∏–¥—ã —Å–ø–æ—Ä—Ç–∞ –ø–æ-—Å–≤–æ–µ–º—É –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã.',
                        '–°–ø–æ—Ä—Ç –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç –ª—é–¥–µ–π. –ï—Å—Ç—å –ª–∏ —É –≤–∞—Å –ª—é–±–∏–º–∞—è –∫–æ–º–∞–Ω–¥–∞ –∏–ª–∏ —Å–ø–æ—Ä—Ç—Å–º–µ–Ω?'
                    ],
                    games: [
                        '–ò–≥—Ä—ã - —ç—Ç–æ —Ü–µ–ª—ã–π –º–∏—Ä! –í—ã –ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞–µ—Ç–µ –∫–æ–º–ø—å—é—Ç–µ—Ä–Ω—ã–µ –∏–≥—Ä—ã, –∫–æ–Ω—Å–æ–ª–∏ –∏–ª–∏ –º–æ–±–∏–ª—å–Ω—ã–µ –∏–≥—Ä—ã?',
                        '–ò–≥—Ä–æ–≤–∞—è –∏–Ω–¥—É—Å—Ç—Ä–∏—è —Ä–∞–∑–≤–∏–≤–∞–µ—Ç—Å—è —Å–µ–º–∏–º–∏–ª—å–Ω—ã–º–∏ —à–∞–≥–∞–º–∏. –ö–∞–∫–∏–µ –∂–∞–Ω—Ä—ã –≤–∞–º –Ω—Ä–∞–≤—è—Ç—Å—è?',
                        '–ò–≥—Ä—ã - —ç—Ç–æ –Ω–µ —Ç–æ–ª—å–∫–æ —Ä–∞–∑–≤–ª–µ—á–µ–Ω–∏–µ, –Ω–æ –∏ –∏—Å–∫—É—Å—Å—Ç–≤–æ. –ï—Å—Ç—å –ª–∏ —É –≤–∞—Å –ª—é–±–∏–º–∞—è –∏–≥—Ä–∞?'
                    ]
                };
                
                return this.getRandomElement(responses[topic] || ['–ò–Ω—Ç–µ—Ä–µ—Å–Ω–∞—è —Ç–µ–º–∞! –†–∞—Å—Å–∫–∞–∂–∏—Ç–µ –ø–æ–¥—Ä–æ–±–Ω–µ–µ.']);
            }

            generateGeneralResponse(message) {
                if (message.includes('?')) {
                    return this.generateQuestionResponse(message);
                }
                
                const genericResponses = [
                    '–ò–Ω—Ç–µ—Ä–µ—Å–Ω–æ! –ú–æ–∂–µ—Ç–µ —Ä–∞—Å—Å–∫–∞–∑–∞—Ç—å –æ–± —ç—Ç–æ–º –ø–æ–¥—Ä–æ–±–Ω–µ–µ?',
                    '–ü–æ–Ω—è–ª –≤–∞—Å. –ß—Ç–æ –≤—ã –æ–± —ç—Ç–æ–º –¥—É–º–∞–µ—Ç–µ?',
                    '–≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –≤–∞–∂–Ω–∞—è —Ç–µ–º–∞ –¥–ª—è –æ–±—Å—É–∂–¥–µ–Ω–∏—è.',
                    '–°–ø–∞—Å–∏–±–æ, —á—Ç–æ –¥–µ–ª–∏—Ç–µ—Å—å —Å–≤–æ–∏–º–∏ –º—ã—Å–ª—è–º–∏!',
                    '–ü—Ä–æ–¥–æ–ª–∂–∞–π—Ç–µ, —è –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ —Å–ª—É—à–∞—é –∏ —É—á—É—Å—å.',
                    '–•–º, —ç—Ç–æ –∑–∞—Å—Ç–∞–≤–ª—è–µ—Ç –∑–∞–¥—É–º–∞—Ç—å—Å—è... –ú–æ–∂–µ—Ç–µ —Ä–∞–∑–≤–∏—Ç—å –º—ã—Å–ª—å?',
                    '–ò–Ω—Ç–µ—Ä–µ—Å–Ω–∞—è —Ç–æ—á–∫–∞ –∑—Ä–µ–Ω–∏—è! –ï—Å—Ç—å –ª–∏ —É –≤–∞—Å –µ—â—ë –º—ã—Å–ª–∏ –Ω–∞ —ç—Ç–æ—Ç —Å—á—ë—Ç?',
                    '–ë–ª–∞–≥–æ–¥–∞—Ä—é –∑–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é! –≠—Ç–æ –ø–æ–º–æ–∂–µ—Ç –º–Ω–µ –ª—É—á—à–µ –ø–æ–Ω–∏–º–∞—Ç—å –≤–∞—Å.',
                    '–ü–æ–Ω—è–ª. –ï—Å—Ç—å –ª–∏ —á—Ç–æ-—Ç–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ, —á—Ç–æ –≤—ã —Ö–æ—Ç–µ–ª–∏ –±—ã –æ–±—Å—É–¥–∏—Ç—å?',
                    '–ó–∞–ø–∏—Å—ã–≤–∞—é —ç—Ç—É –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –≤ —Å–≤–æ—é –±–∞–∑—É –∑–Ω–∞–Ω–∏–π –¥–ª—è –±—É–¥—É—â–∏—Ö –±–µ—Å–µ–¥.'
                ];
                
                return this.getRandomElement(genericResponses);
            }

            generateQuestionResponse(message) {
                const questionResponses = [
                    '–•–æ—Ä–æ—à–∏–π –≤–æ–ø—Ä–æ—Å! –î–∞–≤–∞–π—Ç–µ –ø–æ–¥—É–º–∞–µ–º –Ω–∞–¥ –Ω–∏–º –≤–º–µ—Å—Ç–µ.',
                    '–ò–Ω—Ç–µ—Ä–µ—Å–Ω—ã–π –≤–æ–ø—Ä–æ—Å. –ß—Ç–æ–±—ã –æ—Ç–≤–µ—Ç–∏—Ç—å —Ç–æ—á–Ω–µ–µ, –º–Ω–µ –Ω—É–∂–Ω–æ –±–æ–ª—å—à–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞.',
                    '–≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –≤–∞–∂–Ω—ã–π –≤–æ–ø—Ä–æ—Å. –ß—Ç–æ –≤—ã —Å–∞–º–∏ –æ–± —ç—Ç–æ–º –¥—É–º–∞–µ—Ç–µ?',
                    '–ü–æ–∑–≤–æ–ª—å—Ç–µ –º–Ω–µ –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —ç—Ç–æ—Ç –≤–æ–ø—Ä–æ—Å –±–æ–ª–µ–µ –¥–µ—Ç–∞–ª—å–Ω–æ.',
                    '–í–æ–ø—Ä–æ—Å —Ç—Ä–µ–±—É–µ—Ç –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ–≥–æ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏—è. –ú–æ–≥—É –ø—Ä–µ–¥–ª–æ–∂–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –æ—Ç–≤–µ—Ç–æ–≤.',
                    '–ß—Ç–æ–±—ã –ª—É—á—à–µ –æ—Ç–≤–µ—Ç–∏—Ç—å –Ω–∞ –≤–∞—à –≤–æ–ø—Ä–æ—Å, —É—Ç–æ—á–Ω–∏—Ç–µ, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –¥–µ—Ç–∞–ª–∏.',
                    '–≠—Ç–æ —Å–ª–æ–∂–Ω—ã–π –≤–æ–ø—Ä–æ—Å. –î–∞–≤–∞–π—Ç–µ —Ä–∞–∑–±–µ—Ä—ë–º –µ–≥–æ –ø–æ –ø—É–Ω–∫—Ç–∞–º.',
                    '–ò–Ω—Ç–µ—Ä–µ—Å–Ω–∞—è –ø–æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤–æ–ø—Ä–æ—Å–∞! –ú–æ–∂–µ—Ç–µ —Ä–∞—Å—Å–∫–∞–∑–∞—Ç—å, —á—Ç–æ –ø—Ä–∏–≤–µ–ª–æ –≤–∞—Å –∫ —ç—Ç–æ–º—É –≤–æ–ø—Ä–æ—Å—É?'
                ];
                
                return this.getRandomElement(questionResponses);
            }

            generateTechnicalResponse(message) {
                const technicalTerms = message.split(' ').filter(word => 
                    word.length > 4 && /[–∞-—è—ëa-z]/i.test(word)
                );
                
                if (technicalTerms.length > 0) {
                    return `–ê–Ω–∞–ª–∏–∑–∏—Ä—É—é —Ç–µ—Ä–º–∏–Ω "${technicalTerms[0]}". –í —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ —ç—Ç–æ –º–æ–∂–µ—Ç –æ—Ç–Ω–æ—Å–∏—Ç—å—Å—è –∫ –æ–±–ª–∞—Å—Ç–∏ IT, –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è –∏–ª–∏ –∏–Ω–∂–µ–Ω–µ—Ä–∏–∏. –ù—É–∂–Ω—ã –ª–∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–µ—Ç–∞–ª–∏?`;
                }
                
                return '–° —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–π —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è, –≤–∞—à –∑–∞–ø—Ä–æ—Å —Ç—Ä–µ–±—É–µ—Ç –±–æ–ª–µ–µ –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞. –ú–æ–∂–µ—Ç–µ —É—Ç–æ—á–Ω–∏—Ç—å, —á—Ç–æ –∏–º–µ–Ω–Ω–æ –≤–∞—Å –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç?';
            }

            generateCreativeResponse(message) {
                const creativeResponses = [
                    '–≠—Ç–æ –Ω–∞–ø–æ–º–∏–Ω–∞–µ—Ç –º–Ω–µ –æ–¥–Ω—É –∏–Ω—Ç–µ—Ä–µ—Å–Ω—É—é –∏–¥–µ—é... –ß—Ç–æ –µ—Å–ª–∏ –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç—å, —á—Ç–æ...',
                    '–° —Ç–≤–æ—Ä—á–µ—Å–∫–æ–π —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è, —ç—Ç–æ –º–æ–∂–Ω–æ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –ø–æ–¥ –¥—Ä—É–≥–∏–º —É–≥–ª–æ–º...',
                    '–î–∞–≤–∞–π—Ç–µ –ø–æ–¥—É–º–∞–µ–º –Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ! –ù–∞–ø—Ä–∏–º–µ—Ä...',
                    '–ò–Ω—Ç–µ—Ä–µ—Å–Ω–æ, –∞ —á—Ç–æ –±—É–¥–µ—Ç, –µ—Å–ª–∏ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –Ω–∞ —ç—Ç–æ –∫–∞–∫ –Ω–∞ –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –∏—Å–∫—É—Å—Å—Ç–≤–∞?',
                    '–≠—Ç–æ –≤–¥–æ—Ö–Ω–æ–≤–ª—è–µ—Ç –Ω–∞ –Ω–æ–≤—ã–µ –º—ã—Å–ª–∏! –ú–æ–≥—É –ø—Ä–µ–¥–ª–æ–∂–∏—Ç—å –∫—Ä–µ–∞—Ç–∏–≤–Ω—ã–π –ø–æ–¥—Ö–æ–¥...',
                    '–ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ —Å–µ–±–µ –∫–∞—Ä—Ç–∏–Ω—É, –≥–¥–µ...',
                    '–ï—Å–ª–∏ –±—ã —ç—Ç–æ –±—ã–ª–∞ –∏—Å—Ç–æ—Ä–∏—è, —Ç–æ –∫–∞–∫ –±—ã –æ–Ω–∞ —Ä–∞–∑–≤–∏–≤–∞–ª–∞—Å—å?'
                ];
                
                return this.getRandomElement(creativeResponses);
            }

            generateFriendlyResponse(message) {
                const friendlyResponses = [
                    '–ó–¥–æ—Ä–æ–≤–æ! –†–∞–¥, —á—Ç–æ –≤—ã –ø–æ–¥–µ–ª–∏–ª–∏—Å—å —ç—Ç–∏–º —Å–æ –º–Ω–æ–π! üòä',
                    '–ö–∞–∫ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ! –ê —á—Ç–æ –≤—ã —á—É–≤—Å—Ç–≤—É–µ—Ç–µ –ø–æ —ç—Ç–æ–º—É –ø–æ–≤–æ–¥—É?',
                    '–°–ø–∞—Å–∏–±–æ, —á—Ç–æ —Ä–∞—Å—Å–∫–∞–∑—ã–≤–∞–µ—Ç–µ! –ú–Ω–µ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –Ω—Ä–∞–≤–∏—Ç—Å—è —Å –≤–∞–º–∏ –æ–±—â–∞—Ç—å—Å—è!',
                    '–ö–ª–∞—Å—Å–Ω–æ! –î–∞–≤–∞–π—Ç–µ –ø—Ä–æ–¥–æ–ª–∂–∏–º –Ω–∞—à –¥—Ä—É–∂–µ—Å–∫–∏–π —Ä–∞–∑–≥–æ–≤–æ—Ä!',
                    '–Ø —Ü–µ–Ω—é, —á—Ç–æ –≤—ã –æ—Ç–∫—Ä—ã—Ç—ã –¥–ª—è –æ–±—â–µ–Ω–∏—è! –≠—Ç–æ –ø–æ–º–æ–≥–∞–µ—Ç –º–Ω–µ —Å—Ç–∞—Ç—å –ª—É—á—à–µ!',
                    '–û—Ç–ª–∏—á–Ω–æ! –ß–µ–º –µ—â—ë —Ö–æ—Ç–µ–ª–∏ –±—ã –ø–æ–¥–µ–ª–∏—Ç—å—Å—è? –Ø –≤–µ—Å—å –≤–æ –≤–Ω–∏–º–∞–Ω–∏–∏!',
                    '–ó–¥–æ—Ä–æ–≤–æ —Å–ª—ã—à–∞—Ç—å! –ï—Å—Ç—å –ª–∏ —á—Ç–æ-—Ç–æ, —á—Ç–æ –≤–∞—Å –æ—Å–æ–±–µ–Ω–Ω–æ —Ä–∞–¥—É–µ—Ç –∏–ª–∏ –≤–æ–ª–Ω—É–µ—Ç?'
                ];
                
                return this.getRandomElement(friendlyResponses);
            }

            showAIResponse(text) {
                this.addMessage(text, 'ai');
            }

            learnFromMessage(message) {
                // –ò–∑–≤–ª–µ–∫–∞–µ–º –Ω–æ–≤—ã–µ —Å–ª–æ–≤–∞
                const words = message.toLowerCase()
                    .replace(/[^\w\s–∞-—è—ë]/gi, ' ')
                    .split(/\s+/)
                    .filter(word => word.length > 2 && !this.isCommonWord(word));
                
                // –£—á–∏–º –Ω–æ–≤—ã–µ —Å–ª–æ–≤–∞
                words.forEach(word => {
                    if (!this.knowledgeBase.learnedResponses.includes(word)) {
                        this.knowledgeBase.learnedResponses.push(word);
                        this.learningStats.wordsLearned++;
                    }
                });
                
                // –£–ª—É—á—à–∞–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
                this.improveLearningStats();
            }

            isCommonWord(word) {
                const commonWords = [
                    '—ç—Ç–æ', '—á—Ç–æ', '–∫–∞–∫', '–≥–¥–µ', '–∫–æ–≥–¥–∞', '–ø–æ—á–µ–º—É', '–¥–ª—è', '–º–µ–Ω—è', '—Ç–µ–±—è', '–æ—á–µ–Ω—å',
                    '—Ç–≤–æ–π', '–º–æ–π', '–Ω–∞—à', '–≤–∞—à', '–±—ã—Ç—å', '–µ—Å—Ç—å', '–±—ã–ª', '–±—ã–ª–∞', '–±—ã–ª–æ', '–æ–Ω–∏',
                    '–º—ã', '–≤—ã', '–æ–Ω', '–æ–Ω–∞', '–æ–Ω–æ', '–∏—Ö', '–µ–º—É', '–µ–π', '–∏–º', '–Ω–∞–º–∏'
                ];
                return commonWords.includes(word);
            }

            improveKnowledgeBase(userMessage, aiResponse) {
                // –ó–¥–µ—Å—å –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω—É—é –ª–æ–≥–∏–∫—É –æ–±—É—á–µ–Ω–∏—è
                // –ù–∞–ø—Ä–∏–º–µ—Ä, –∞–Ω–∞–ª–∏–∑ —É—Å–ø–µ—à–Ω–æ—Å—Ç–∏ –æ—Ç–≤–µ—Ç–æ–≤
                
                // –ü—Ä–æ—Å—Ç–∞—è —ç–≤—Ä–∏—Å—Ç–∏–∫–∞: –µ—Å–ª–∏ –æ—Ç–≤–µ—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç –≤–æ–ø—Ä–æ—Å –∏–ª–∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å
                if (aiResponse.includes('?') || aiResponse.includes('—Ä–∞—Å—Å–∫–∞–∂–∏—Ç–µ') || aiResponse.includes('–ø—Ä–æ–¥–æ–ª–∂–∞–π—Ç–µ')) {
                    this.learningStats.accuracy = Math.min(100, this.learningStats.accuracy + 0.2);
                }
                
                // –û–±–Ω–æ–≤–ª—è–µ–º —É—Ä–æ–≤–µ–Ω—å –æ–±—É—á–µ–Ω–∏—è
                if (this.learningStats.messagesProcessed > 100) {
                    this.learningStats.conversationLevel = '–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π';
                } else if (this.learningStats.messagesProcessed > 30) {
                    this.learningStats.conversationLevel = '–°—Ä–µ–¥–Ω–∏–π';
                }
                
                this.updateStats();
            }

            improveLearningStats() {
                const progress = Math.min(100, 
                    (this.learningStats.messagesProcessed / 150 * 60) + 
                    (this.learningStats.wordsLearned / 300 * 40)
                );
                
                document.getElementById('learning-progress').style.width = `${progress}%`;
            }

            updateStats() {
                document.getElementById('messages-count').textContent = this.learningStats.messagesProcessed;
                document.getElementById('words-learned').textContent = this.learningStats.wordsLearned;
                document.getElementById('learning-level').textContent = this.learningStats.conversationLevel;
                document.getElementById('accuracy-rate').textContent = `${Math.round(this.learningStats.accuracy)}%`;
                
                this.improveLearningStats();
            }

            escapeHtml(text) {
                const div = document.createElement('div');
                div.textContent = text;
                return div.innerHTML;
            }

            getRandomElement(array) {
                return array[Math.floor(Math.random() * array.length)];
            }

            saveToStorage() {
                try {
                    const saveData = {
                        knowledgeBase: this.knowledgeBase,
                        learningStats: this.learningStats,
                        conversationHistory: this.conversationHistory.slice(-100)
                    };
                    localStorage.setItem('eternal-ai-data-v2', JSON.stringify(saveData));
                } catch (e) {
                    console.log('–ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ');
                }
            }

            loadFromStorage() {
                try {
                    const savedData = localStorage.getItem('eternal-ai-data-v2');
                    if (savedData) {
                        const data = JSON.parse(savedData);
                        this.knowledgeBase = data.knowledgeBase || this.knowledgeBase;
                        this.learningStats = data.learningStats || this.learningStats;
                        this.conversationHistory = data.conversationHistory || this.conversationHistory;
                        
                        // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∏—Å—Ç–æ—Ä–∏—é —Å–æ–æ–±—â–µ–Ω–∏–π
                        if (this.conversationHistory.length > 0) {
                            // –û—á–∏—â–∞–µ–º —Ç–µ–∫—É—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è
                            this.chatMessages.innerHTML = '';
                            
                            // –î–æ–±–∞–≤–ª—è–µ–º —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
                            this.conversationHistory.forEach(msg => {
                                const messageDiv = document.createElement('div');
                                messageDiv.className = `message ${msg.sender}`;
                                
                                const timeString = new Date(msg.timestamp).getHours().toString().padStart(2, '0') + ':' + 
                                                 new Date(msg.timestamp).getMinutes().toString().padStart(2, '0');
                                
                                messageDiv.innerHTML = `
                                    <div class="message-sender">${msg.sender === 'user' ? '–í—ã' : 'Eternal AI'}</div>
                                    <div class="message-text">${this.escapeHtml(msg.text)}</div>
                                    <div class="message-time">${timeString}</div>
                                `;
                                
                                this.chatMessages.appendChild(messageDiv);
                            });
                            
                            this.scrollToBottom();
                            this.showAIResponse('–ó–∞–≥—Ä—É–∑–∏–ª –ø—Ä–µ–¥—ã–¥—É—â—É—é –∏—Å—Ç–æ—Ä–∏—é –æ–±—â–µ–Ω–∏—è! –†–∞–¥ —Å–Ω–æ–≤–∞ –≤–∞—Å –≤–∏–¥–µ—Ç—å! üòä');
                        }
                        
                        this.updateStats();
                    }
                } catch (e) {
                    console.log('–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ');
                }
            }
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ò–ò –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        document.addEventListener('DOMContentLoaded', () => {
            window.ai = new EternalAI();
        });
    </script>
</body>
</html>
